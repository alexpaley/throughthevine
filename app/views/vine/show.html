{% extends 'layout.html' %}
{% block content %}
<div class="row-fluid video-wrapper">
  <div class="span4 video">
    <video class="vid" id="video_0" width="100%" height="100%" preload="auto" muted="muted" poster={{ vids[0].poster }}>
      <source src={{ vids[0].video }} type="video/mp4">
    </video>
    <div class="av">
      <a href={{ vids[0].url }}><img class="avatar" src={{ vids[0].avatar }}></a>
      {{ vids[0].username }} - {{ vids[0].tagline }}
    </div>
  </div>
  <div class="span4 video">
    <video class="vid" id="video_1" width="100%" height="100%" preload="auto" muted="muted" poster={{ vids[1].poster }}>
      <source src={{ vids[1].video }} type="video/mp4">
    </video>
    <div class="av">
      <a href={{ vids[1].url }}><img class="avatar" src={{ vids[1].avatar }}></a>
      {{ vids[1].username }} - {{ vids[1].tagline }}
    </div>
  </div>
  <div class="span4 video">
    <video class="vid" id="video_2" width="100%" height="100%" preload="auto" muted="muted" poster={{ vids[2].poster }}>
      <source src={{ vids[2].video }} type="video/mp4">
    </video>
    <div class="av">
      <a href={{ vids[2].url }}><img class="avatar" src={{ vids[2].avatar }}></a>
      {{ vids[2].username }} - {{ vids[2].tagline }}
    </div>
  </div>
</div>

<div class="row">
  <div class="searchbar span12 playVideos">
    <div class="vine-v"><i class="icon-search"></i></div>
  </div>
</div>
<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
<script>

var playVideo = function (el) {
  if (!el) { return; }
  if (el.getAttribute('controls') !== 'true') {
      el.setAttribute('controls', 'true');
  }
  el.paused ? el.play() : el.pause();
  el.removeAttribute('controls');
}

$('.playVideos').on('click', function (e) {
  console.log('playing videos');
  playVideo($('#video_0' ).get(0));
  $('#video_0').bind('ended', function (e) {
    playVideo($('#video_1' ).get(0));
    $('#video_1').bind('ended', function (e) {
      playVideo($('#video_2' ).get(0));
      $('#video_2').bind('ended', function (e) {
        console.log('ended');
      });
    });
  });
});

</script>
{% endblock %}